<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Чат</title>
<link rel="stylesheet" href="css/chatstyle.css" />
<script src="js/auth.js" defer></script>
</head>
<body>
    <div class="app">
        <div class="card chatWindow">
        <h3>Общий чат</h3>
        <div class="messages" id="messages"></div>
        <div class="inputRow">
        <input id="chatInput" placeholder="Введите сообщение..." />
        <button id="sendBtn" class="btn">Отправить</button>
        </div>
    </div>
<div class="sidebar card">
<div id="userPanel"></div>
<button id="openAccount" class="linkBtn">Открыть аккаунт</button>
<button id="logoutBtn" class="btn">Выйти</button>
</div>
</div>


<script src="js/account.js"></script>
<script src="js/chat.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
    const openAccount = document.getElementById('openAccount');
    const logoutBtn = document.getElementById('logoutBtn');

    if(openAccount){
        openAccount.addEventListener('click', function(e){
            const user = (window.Auth && typeof window.Auth.getCurrentUser === 'function') ? window.Auth.getCurrentUser() : null;
            if(user){ location.href = 'account.html'; }
            else if(window._auth && typeof window._auth.showQuickLoginPrompt === 'function'){ window._auth.showQuickLoginPrompt(); }
            else { location.href = 'login.html'; }
        });
    }

    if(logoutBtn){
        logoutBtn.addEventListener('click', function(){
            if(window.Auth && typeof window.Auth.logout === 'function') window.Auth.logout();
            location.href = 'index.html';
        });
    }
});
</script>
</body>
</html>